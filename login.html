<!DOCTYPE html>
<!-- saved from url=(0049)https://getbootstrap.com/docs/4.3/examples/album/ -->
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="google-signin-scope" content="profile email">
  <meta name="google-signin-client_id"
    content="28058610215-9l02de14bdrkl60q1q6attmkeofnecsk.apps.googleusercontent.com">


  <title>eMercado - Todo lo que busques está aquí</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="css/login.css">

</head>

<body class="text-center">
  <div class="fullcontain">
    <img class="imagen1" src="img/Ecommerce wallp.jpg" alt="Ecommerce">

    <div class="container">
      <!-- Formulario para iniciar sesion  -->
      <form id="form1" action="index.html" method="POST">

        <h1>Iniciar sesión</h1>

        <div class="form-contenedor">
          <img class="avatar" src="img/avatar.png" alt="avatar">
          <input class="form-relleno" type="text" name="email" id="email" placeholder="Nombre de usuario" required> <br>
        </div>

        <div class="form-contenedor">
          <img class="key" src="img/key.png" alt="key">
          <input class="form-relleno2" type="password" name="pass" id="pass" placeholder="Contraseña" required> <br>
        </div>

        <div class="form-contenedor">
          <input class="form-checkbox" type="checkbox" name="Remember" id="Remember"> Recuérdame <br>
        </div>

        <button type="submit" class="btn btn-primary"> Iniciar sesión </button> <br>

        <!-- fin de formulario -->
        <!-- Paginas redirigen a "Oops" y luego nos lleva al index -->
        <span class="passw"><a class="hiper" href="Oops.html">¿Olvidaste tu contraseña?</a></span> <br>
        <span class="passw">¿No tienes una cuenta? <a class="hiper" href="Oops.html">Registrate aquí</a></span>
        <div id="signInId" class="g-signin2" data-onsuccess="onSignIn" data-theme="dark" type="hidden"></div>
        <a id="signOutId" href="#" onclick="signOut();" type="hidden">Sign out</a>
      </form>
    </div>
  </div>

  <script src="js/init.js"></script>
  <script src="js/login.js"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script>
  let auth2; // The Sign-In object.
  let googleUser; // The current user.
  let profile;

  /**
   * Calls startAuth after Sign in V2 finishes setting up.
   */
  const appStart = function() {
    gapi.load('auth2', initSigninV2);
  };

  function onSignIn(googleUser) {
    $("#signInId").hide();

    // Useful data for your client-side scripts:
    profile = googleUser.getBasicProfile();

    console.log("ID: " + profile.getId()); // Don't send this directly to your server!
    console.log('Full Name: ' + profile.getName());
    console.log('Given Name: ' + profile.getGivenName());
    console.log('Family Name: ' + profile.getFamilyName());
    console.log("Image URL: " + profile.getImageUrl());
    console.log("Email: " + profile.getEmail());
    showSidebarMessage('Welcome ' + profile.getGivenName() + '!');
    showSidebarMessage('Your email ' + profile.getEmail() + '!');

    // The ID token you need to pass to your backend:
    const id_token = googleUser.getAuthResponse().id_token;
    console.log("ID Token: " + id_token);

    window.location.replace(window.location.origin + '/login?username=' + profile.getEmail());

    $("#signOutId").show();
  }

  function signOut() {
    $("#signOutId").hide();

    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function() {
      console.log('User signed out.');
    });

    showSidebarMessage('See you!');
    $("#signInId").show();
  }

  $(document).ready(function() {
    console.log('ready');
    console.log(googleUser);
    if (googleUser && googleUser.isSignedIn()) {
      showSidebarMessage('Welcome Back!' + profile?profile.getEmail():'');
      $("#signInId").hide();
      $("#signOutId").show();
    } else {
      showSidebarMessage('Welcome Guest!');
      $("#signInId").show();
      $("#signOutId").hide();
    }
  });
  </script>
</body>

</html>